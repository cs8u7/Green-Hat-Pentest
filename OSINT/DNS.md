- An Internet Protocol (IP) address is the unique identifying number assigned to every device connected to the Internet. An IP address definition is a numeric label assigned to devices that use the internet to communicate. In reconnaissance workflow, pen-testers can achieve the target IP address by using a DNS query. Here is a general workflow of DNS record query, this flow is applied for both command and internet browsers.

![](image/Pasted%20image%2020241001103018.png)

- First, the process requires a web domain to initialize the workflow, then check that domain if it exists in the local cache, OS cache, and router cache. The local cache, also known as the browser cache, is maintained by web browsers. When a user visits a website, the browser stores the DNS resolution results temporarily. The OS cache, or system cache, is maintained by the operating system and is used to store DNS query results system-wide. When an application needs to resolve a domain name, the OS checks its cache. If a recent entry is found, it uses the cached IP address. The router cache is maintained by the router or network gateway device that connects a local network to the internet. When a device on the network makes a DNS query, the router checks its cache. Last, check the host file, a static text file used by the operating system to map host names to IP addresses. Users changing the content of this file to map the domain with IP may not resolve in public DNS. 
- Next, the client requests the nearest DNS resolver provided by the ISP (Internet Service Provider), responsible for communicating with several other DNS servers to hunt down an IP address. Because DNS resolvers are supplied by different organizations, they are different systems, so they can have their policy and cache. So, the DNS resolver's cache is also looked up for domain information. Then, the resolver queries to DNS servers in order queries are root DNS server, Top Level DNS server, and Authoritative DNS server to collect the IP address of the provided domain. 
- When there is a request to complete a domain name into an IP address, the client will send the request to the nearest DNS resolver. The resolver server queries a DNS root server, which is the top level in the DNS hierarchy. When the root server receives a query for the IP address for google.com Google, for example, the root server is not going to know what the IP address is.  The DNS root server manages all top-level domains so the root server will direct the resolver to the TLD or top-level domain server for the .com domain. So the resolver will now ask the TLD server for an IP address for the domain based on instructions in response's root DNS server. 
- The top-level domain server stores address information for top-level domains such as .com, .net, .org, and so on. TLD servers store numbers of DNS records, which specify the authoritative DNS servers for each level domain under the TLD. This particular TLD server manages the .com domain which google.com is a part of. So when a TLD server receives a query for the IP address for google.com, the TLD server is not going to know what IP addresses for google.com but they store information about the authoritative DNS servers that are responsible for providing the IP addresses for these domain names. So the TLD will direct the resolver to authoritative name servers. So once again the resolver will now ask the authoritative name server for the IP address for google.com. 
- Authoritative name servers or servers are responsible for knowing everything about the domain which includes the IP address. Authoritative DNS is the system that keeps official records corresponding to domain names such as IP addresses. Domain names are the human-readable names of IP addresses that direct applications such as browsers to websites such as google.com. The authoritative server responds with a DNS record that includes the IP address and the DNS resolver server caches the IP address and sends it to the browser. So now the client or browser gets the domain's IP address.